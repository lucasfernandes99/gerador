<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Gerador de QR Codes - Festa</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
<style>
  body { font-family: Arial; margin: 20px; background: #f5f5f5; }
  h1 { text-align: center; }
  input, button { margin: 5px; padding: 8px; }
  .familia { background: #fff; padding: 10px; margin: 10px 0; border-radius: 8px; }
</style>
</head>
<body>
<h1>üéâ Gerador de QR Code - Festa</h1>

<label>Nome da Fam√≠lia:</label><br>
<input type="text" id="nome" placeholder="Ex: Fam√≠lia Silva"><br>
<label>N√∫mero de convidados:</label><br>
<input type="number" id="qtd" min="1" value="1"><br>
<button onclick="adicionar()">Adicionar Fam√≠lia</button>
<button onclick="exportar()">Exportar Dados (.json)</button>

<h2>Fam√≠lias Cadastradas:</h2>
<div id="lista"></div>

<script>
let familias = [];
let contador = 1;

function adicionar() {
  const nome = document.getElementById('nome').value.trim();
  const qtd = parseInt(document.getElementById('qtd').value);
  if (!nome || qtd < 1) { alert('Preencha todos os campos.'); return; }

  const id = 'FAM' + String(contador).padStart(3, '0');
  contador++;

  familias.push({ id, nome, qtd, entrou: false });
  atualizarLista();
  gerarQRCode(id, nome, qtd);
  document.getElementById('nome').value = '';
  document.getElementById('qtd').value = 1;
}

function gerarQRCode(id, nome, qtd) {
  const qr = new QRious({ value: id, size: 150 });
  const div = document.createElement('div');
  div.className = 'familia';
  div.innerHTML = `<strong>${nome}</strong><br>${qtd} convidados<br><img src="${qr.toDataURL()}"><br>ID: ${id}`;
  document.getElementById('lista').appendChild(div);
}

function atualizarLista() {
  document.getElementById('lista').innerHTML = '';
  familias.forEach(f => gerarQRCode(f.id, f.nome, f.qtd));
}

function exportar() {
  if (familias.length === 0) { alert('Nenhuma fam√≠lia cadastrada.'); return; }
  const blob = new Blob([JSON.stringify(familias, null, 2)], { type: 'application/json' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'familias.json';
  a.click();
}
</script>
</body>
</html>